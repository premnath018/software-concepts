## **1. Stored Procedures**

A **Stored Procedure** is a **precompiled set of SQL statements** stored in the database that can be executed multiple times.

### **Why Use Stored Procedures?**

‚úÖ **Improves Performance**: Reduces the need to send multiple queries from the application.  
‚úÖ **Security**: Prevents SQL injection since queries are precompiled.  
‚úÖ **Code Reusability**: Stored procedures can be used in multiple applications.  
‚úÖ **Reduces Network Traffic**: Since execution happens on the database server.

### **Syntax of Stored Procedure**

```sql
CREATE PROCEDURE GetUserDetails(IN user_id INT)
BEGIN
    SELECT * FROM Users WHERE id = user_id;
END;
```

### **Executing a Stored Procedure**

```sql
CALL GetUserDetails(5);
```

---

### **Example Scenario: Bank Balance Check**

```sql
DELIMITER $$ 
CREATE PROCEDURE CheckBalance(IN accID INT)
BEGIN
    SELECT Balance FROM Accounts WHERE AccountID = accID;
END$$
DELIMITER ;
```

**Call the procedure**:

```sql
CALL CheckBalance(101);
```

üöÄ **Real-World Example**:

- Banking systems use stored procedures for **fund transfers**, **balance checks**, and **transaction logs**.

---

## **2. Triggers**

A **Trigger** is a special type of stored procedure that **executes automatically** in response to certain database events like **INSERT, UPDATE, DELETE**.

### **Why Use Triggers?**

‚úÖ **Enforces Business Rules**: Ensures data integrity.  
‚úÖ **Audit & Logging**: Automatically logs changes.  
‚úÖ **Automated Actions**: Can update or insert data when certain conditions are met.

### **Syntax of a Trigger**

```sql
CREATE TRIGGER trigger_name
BEFORE/AFTER INSERT/UPDATE/DELETE
ON table_name
FOR EACH ROW
BEGIN
    -- SQL Statements
END;
```

---

### **Example Scenario: Automatic Log Entry**

Whenever a new employee is added to the `Employees` table, a record is inserted into the `Employee_Log` table.

```sql
DELIMITER $$  
CREATE TRIGGER EmployeeInsertTrigger  
AFTER INSERT ON Employees  
FOR EACH ROW  
BEGIN  
    INSERT INTO Employee_Log(EmployeeID, Action, ActionTime)  
    VALUES (NEW.ID, 'INSERT', NOW());  
END$$  
DELIMITER ;
```

üöÄ **Real-World Example**:

- **E-commerce**: Logging when an **order status changes**.
- **Banking**: Tracking every **withdrawal and deposit**.

---

# **üî• Interview Questions with Answers**

### **Stored Procedures**

1Ô∏è‚É£ **What is the difference between a stored procedure and a function?**  
‚úÖ **Stored Procedures** can execute multiple queries and **do not return values directly**.  
‚úÖ **Functions** return a value and are mainly used in **SELECT statements**.

2Ô∏è‚É£ **Can a stored procedure return multiple values?**  
‚úÖ Yes, using **OUT parameters** or **SELECT statements**.

3Ô∏è‚É£ **How do you pass parameters to a stored procedure?**  
‚úÖ Using **IN, OUT, and INOUT parameters**.

```sql
CREATE PROCEDURE GetUser(IN userID INT, OUT userName VARCHAR(100))
BEGIN
    SELECT name INTO userName FROM Users WHERE id = userID;
END;
```

4Ô∏è‚É£ **Can we call a stored procedure inside another stored procedure?**  
‚úÖ Yes, this is called **nesting of stored procedures**.

---

### **Triggers**

5Ô∏è‚É£ **What are the types of triggers?**  
‚úÖ **BEFORE Trigger**: Executes **before** the event (e.g., before INSERT).  
‚úÖ **AFTER Trigger**: Executes **after** the event (e.g., after DELETE).

6Ô∏è‚É£ **Can a trigger call a stored procedure?**  
‚úÖ Yes, a trigger can **execute a stored procedure** inside its body.

7Ô∏è‚É£ **Can we update the same table inside a trigger?**  
üö® **No!** This causes a **recursive trigger**, which is usually **disabled by default**.

8Ô∏è‚É£ **What happens if an error occurs inside a trigger?**  
üö® The entire transaction **rolls back** unless explicitly handled.

---

# **üìå Summary**

|Feature|Stored Procedures|Triggers|
|---|---|---|
|**Execution**|Manually called (`CALL procedure`)|Automatically executes on an event|
|**Use Case**|Business logic, batch processing|Auditing, enforcing rules|
|**Performance**|Precompiled for faster execution|Minimal performance overhead|
|**Return Values**|Can return multiple values|No return value|

---

# **Final Thoughts**

- ‚úÖ **Use Stored Procedures** for **business logic** and **complex operations**.
- ‚úÖ **Use Triggers** for **logging, auditing, and automation**.
- ‚úÖ **Combine both** for maximum efficiency in **real-world applications**.
